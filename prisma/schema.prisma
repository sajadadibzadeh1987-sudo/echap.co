generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              String    @id @default(cuid())
  phone           String    @unique
  password        String?
  // âœ… Ù†Ù‚Ø´ Ú©Ø§Ø±Ø¨Ø± Ø­Ø§Ù„Ø§ enum Ø§Ø³ØªØŒ Ù†Ù‡ Ø±Ø´ØªÙ‡â€ŒÛŒ Ø¢Ø²Ø§Ø¯
  role            UserRole  @default(USER)
  hasSelectedRole Boolean   @default(false)
  firstName       String?
  lastName        String?
  email           String?   @unique
  slug            String?   @unique
  image           String?
  bio             String?
  otp             String?
  otpExpiry       DateTime?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  // â­ Ø³ÛŒØ³ØªÙ… Ø³Ú©Ù‡â€ŒÙ‡Ø§
  coins       Int       @default(0) // ØªØ¹Ø¯Ø§Ø¯ Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
  lastCheckIn DateTime?            // Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø§Ø±ÛŒ Ú©Ù‡ Ø³Ú©Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡ Ú¯Ø±ÙØªÙ‡

  jobAds           JobAd[]
  businessProfile  BusinessProfile?
  printShopProfile PrintShopProfile?
}

model JobAd {
  id          String   @id @default(cuid())
  title       String
  description String
  category    String
  phone       String
  createdAt   DateTime @default(now())
  isFeatured  Boolean  @default(false)
  images      String[]

  // ÙˆØ¶Ø¹ÛŒØª Ø¢Ú¯Ù‡ÛŒ (ØµÙ Ø§Ù†ØªØ´Ø§Ø±ØŒ Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡ØŒ Ø±Ø¯ Ø´Ø¯Ù‡)
  status JobAdStatus @default(PENDING)

  // ğŸ‘‡ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯
  group        String?   // Ú¯Ø±ÙˆÙ‡ Ø§ØµÙ„ÛŒ: JOB / FREELANCER / PRINT_SERVICE / MACHINE / MATERIAL / OTHER
  categorySlug String?   // Ø§Ø³Ù„Ø§Ú¯ Ø¯Ø³ØªÙ‡: Ù…Ø«Ù„Ø§ "job-operator-offset"

  // Ù…Ø§Ù„Ú© Ø¢Ú¯Ù‡ÛŒ
  userId String?
  user   User?   @relation(fields: [userId], references: [id])

  // âœ… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø±Ø³ÛŒ / ØªØ£ÛŒÛŒØ¯ / Ø±Ø¯ ØªÙˆØ³Ø· Ù…Ø¯ÛŒØ± Ø§Ø±Ø´Ø¯
  moderatedById  String?   // id Ù…Ø¯ÛŒØ± Ø§Ø±Ø´Ø¯
  moderatedAt    DateTime? // Ø²Ù…Ø§Ù† Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±Ø±Ø³ÛŒ
  moderationNote String?   // ØªÙˆØ¶ÛŒØ­ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø±Ø§ÛŒ ØªØ£ÛŒÛŒØ¯/Ø±Ø¯ (Ù…Ø«Ù„Ø§ Ø¯Ù„ÛŒÙ„ Ø±Ø¯ Ø´Ø¯Ù†)

  // âœ… Ø³Ø§ÙØªâ€ŒØ¯ÛŒÙ„ÛŒØª Ø¢Ú¯Ù‡ÛŒ + Ø¯Ù„ÛŒÙ„ Ø­Ø°Ù
  isDeleted    Boolean  @default(false) // Ø§Ú¯Ø± true Ø¨Ø§Ø´Ø¯ ÛŒØ¹Ù†ÛŒ Ø¢Ú¯Ù‡ÛŒ Ø¨Ø±Ø§ÛŒ Ø¹Ù…ÙˆÙ… Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
  deletedById  String?               // id Ø­Ø°Ùâ€ŒÚ©Ù†Ù†Ø¯Ù‡ (Ù…Ø«Ù„Ø§ Ø³ÙˆÙ¾Ø± Ø§Ø¯Ù…ÛŒÙ†)
  deletedAt    DateTime?
  deleteReason String?               // Ø¯Ù„ÛŒÙ„ Ø­Ø°Ù Ø¢Ú¯Ù‡ÛŒ ØªÙˆØ³Ø· Ù…Ø¯ÛŒØ±
}

model BusinessProfile {
  id     String @id @default(cuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id])

  slug          String   @unique
  displayName   String
  description   String?
  services      String[]
  phone         String?
  address       String?
  locationLat   Float?
  locationLng   Float?
  logoUrl       String?
  galleryImages String[]
  openingHours  String?
  website       String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model PrintShopProfile {
  id     String @id @default(cuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id])

  name          String
  slug          String   @unique
  description   String?
  phone         String?
  address       String?
  locationLat   Float?
  locationLng   Float?
  logoUrl       String?
  galleryImages String[]
  clients       String[]
  capabilities  String[] @default([])
  openingHours  String?
  website       String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model OTP {
  id        Int      @id @default(autoincrement())
  phone     String   @unique
  code      String
  createdAt DateTime @default(now())
}

enum JobAdStatus {
  PENDING
  PUBLISHED
  REJECTED
}

// âœ… Ù†Ù‚Ø´â€ŒÙ‡Ø§ (Ø´Ø§Ù…Ù„ Ù…Ø¯ÛŒØ± Ø§Ø±Ø´Ø¯)
enum UserRole {
  USER        // Ú©Ø§Ø±Ø¨Ø± Ø¹Ø§Ø¯ÛŒ
  FREELANCER  // ÙØ±ÛŒÙ„Ù†Ø³Ø±
  SUPPLIER    // ØªØ£Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡
  PRINTSHOP   // Ú†Ø§Ù¾Ø®Ø§Ù†Ù‡
  SUPER_ADMIN // Ù…Ø¯ÛŒØ± Ø§Ø±Ø´Ø¯
}
