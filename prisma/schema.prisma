generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              String    @id @default(cuid())
  phone           String    @unique
  password        String?
  role            String    @default("user")
  hasSelectedRole Boolean   @default(false)
  firstName       String?
  lastName        String?
  email           String?   @unique
  slug            String?   @unique
  image           String?
  bio             String?
  otp             String?
  otpExpiry       DateTime?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  jobAds           JobAd[]
  businessProfile  BusinessProfile?
  printShopProfile PrintShopProfile?
}

model JobAd {
  id          String   @id @default(cuid())
  title       String
  description String
  category    String
  phone       String
  createdAt   DateTime @default(now())
  isFeatured  Boolean  @default(false)
  images      String[]

  // ÙˆØ¶Ø¹ÛŒØª Ø¢Ú¯Ù‡ÛŒ (ØµÙ Ø§Ù†ØªØ´Ø§Ø±ØŒ Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡ØŒ Ø±Ø¯ Ø´Ø¯Ù‡)
  status JobAdStatus @default(PENDING)

  // ğŸ‘‡ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯
  group        String?   // Ú¯Ø±ÙˆÙ‡ Ø§ØµÙ„ÛŒ: JOB / FREELANCER / PRINT_SERVICE / MACHINE / MATERIAL / OTHER
  categorySlug String?   // Ø§Ø³Ù„Ø§Ú¯ Ø¯Ø³ØªÙ‡: Ù…Ø«Ù„Ø§ "job-operator-offset"

  userId String?
  user   User?   @relation(fields: [userId], references: [id])
}

model BusinessProfile {
  id     String @id @default(cuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id])

  slug          String   @unique
  displayName   String
  description   String?
  services      String[]
  phone         String?
  address       String?
  locationLat   Float?
  locationLng   Float?
  logoUrl       String?
  galleryImages String[]
  openingHours  String?
  website       String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model PrintShopProfile {
  id     String @id @default(cuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id])

  name          String
  slug          String   @unique
  description   String?
  phone         String?
  address       String?
  locationLat   Float?
  locationLng   Float?
  logoUrl       String?
  galleryImages String[]
  clients       String[]
  capabilities  String[] @default([])
  openingHours  String?
  website       String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model OTP {
  id        Int      @id @default(autoincrement())
  phone     String   @unique
  code      String
  createdAt DateTime @default(now())
}

enum JobAdStatus {
  PENDING
  PUBLISHED
  REJECTED
}
